
                      /******************************************************************************/
/****         Generated by IBExpert 2006.12.13 20.12.2016 22:18:17         ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1251;

CREATE DATABASE '192.168.0.3:D:\DB\PackingListKSP4.fdb'
USER 'student' PASSWORD 'edu-759'
PAGE_SIZE 1024
DEFAULT CHARACTER SET WIN1251;



/******************************************************************************/
/****                               Domains                                ****/
/******************************************************************************/

CREATE DOMAIN DATES AS
DATE;

CREATE DOMAIN FKEYS AS
INTEGER;

CREATE DOMAIN MONEY AS
DECIMAL(15,2);

CREATE DOMAIN "NAMES" AS
VARCHAR(20);

CREATE DOMAIN PKEYS AS
INTEGER
NOT NULL;

/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/



CREATE TABLE INVOICE (
    INV_ID  PKEYS NOT NULL,
    DATE_INV    DATES UNIQUE
);

CREATE TABLE SEPARATOR (
    SRT_ID  PKEYS NOT NULL,
    INV_ID  FKEYS,
    PRD_ID  FKEYS,
    COUNT_PRD   INTEGER
);

CREATE TABLE PRODUCT (
    PRD_ID  PKEYS NOT NULL,
    NAME    "NAMES" UNIQUE,
    PRICE   MONEY
);

INSERT INTO INVOICE(INV_ID, DATE_INV) VALUES (1, '01.01.2001');
INSERT INTO INVOICE(INV_ID, DATE_INV) VALUES (2, '02.02.2002');

COMMIT WORK;

INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (1, 1, 1, 10);
INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (2, 1, 2, 15);
INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (3, 1, 3, 20);
INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (4, 2, 1, 25);
INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (5, 2, 2, 30);
INSERT INTO SEPARATOR(SRT_ID, INV_ID, PRD_ID, COUNT_PRD) VALUES (6, 2, 3, 35);

COMMIT WORK;

INSERT INTO PRODUCT (PRD_ID, NAME, PRICE) VALUES (1, 'COCA-COLA', 80.99);
INSERT INTO PRODUCT (PRD_ID, NAME, PRICE) VALUES (2, 'PEPSI', 70.99);
INSERT INTO PRODUCT (PRD_ID, NAME, PRICE) VALUES (3, 'LAYS', 119.99);

COMMIT WORK;

/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE INVOICE ADD CONSTRAINT PK_INVOICE PRIMARY KEY (INV_ID);
ALTER TABLE SEPARATOR ADD CONSTRAINT PK_SEPARATOR PRIMARY KEY (SRT_ID);
ALTER TABLE PRODUCT ADD CONSTRAINT PK_PRODUCT PRIMARY KEY (PRD_ID);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE SEPARATOR ADD CONSTRAINT FK_SEPARATOR_2 FOREIGN KEY (INV_ID) REFERENCES INVOICE (INV_ID) ON UPDATE CASCADE;
ALTER TABLE SEPARATOR ADD CONSTRAINT FK_SEPARATOR_3 FOREIGN KEY (PRD_ID) REFERENCES PRODUCT (PRD_ID) ON UPDATE CASCADE;



